<!DOCTYPE html>
<html lang="bn">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description"
    content="শিক্ষার্থীদের পারফর্ম্যান্স বিশ্লেষণ ড্যাশবোর্ড - Students Performance Analysis Dashboard" />
  <meta name="keywords"
    content="student, performance, analysis, dashboard, education, bengali, শিক্ষার্থী, পারফর্ম্যান্স" />
  <meta name="author" content="Students Performance Analysis" />

  <title>পারফর্ম্যান্স এপস || Mustafa sir</title>

  <!-- Favicon -->
  <link rel="icon" type="image/svg+xml" href="/favicon.svg" />

  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />

  <!-- Main Entry Point -->
  <script type="module" src="/src/app.js"></script>
</head>

<body>
  <!-- Loading Overlay -->
  <!-- Loading Overlay -->
  <div class="loading-overlay" id="loadingOverlay" style="display: flex;">
    <div class="loading-container">
      <div class="professional-spinner"></div>
      <div class="loading-text">লোড হচ্ছে...</div>
    </div>
  </div>

  <div class="container-fluid px-4">
    <!-- Header Controls -->
    <div class="header-controls">
      <!-- Sync Status Indicator -->

      <button class="theme-toggle" id="themeToggle" aria-label="Toggle Theme">
        <i class="fas fa-moon"></i>
      </button>
    </div>

    <!-- Data Management Toolbar -->
    <div class="card data-management-card">
      <div class="dm-controls">

        <!-- Upload Button -->
        <div class="dm-upload-wrapper">
          <input type="file" id="jsonFileInput" accept=".json,.xlsx,.xls" style="display: none;" />
          <label for="jsonFileInput" class="dm-btn dm-upload">
            <i class="fas fa-cloud-upload-alt"></i> <span class="dm-btn-text">আপলোড এক্সেল</span>
          </label>
        </div>

        <!-- Download Template -->
        <button id="downloadTemplateBtn" class="dm-btn dm-template">
          <i class="fas fa-file-excel"></i> <span class="dm-btn-text">ডেমো এক্সেল ফাইল</span>
        </button>

        <!-- Report Download Dropdown -->
        <div class="dropdown" style="position: relative;">
          <button id="reportDropdownBtn" class="dm-btn dm-report">
            <i class="fas fa-download"></i> <span class="dm-btn-text">রিপোর্ট</span> <i class="fas fa-chevron-down"
              style="margin-left: 4px; font-size: 0.7em;"></i>
          </button>
          <div id="reportDropdownMenu" class="dropdown-menu">
            <div class="dropdown-item" id="downloadChartBtn">
              <i class="fas fa-file-image"></i> চার্ট (Image)
            </div>
            <div class="dropdown-item" id="downloadExcelBtn">
              <i class="fas fa-file-excel"></i> ডেটা (Excel)
            </div>
          </div>
        </div>

        <!-- Save Analysis Button -->
        <button id="saveAnalysisBtn" class="dm-btn dm-save">
          <i class="fas fa-save"></i> <span class="dm-btn-text">সেভ</span>
        </button>

        <!-- Search Box -->
        <div class="dm-search">
          <i class="fas fa-search dm-search-icon"></i>
          <input type="text" id="searchInput" placeholder="নাম বা রোল দিয়ে সার্চ..." />
          <div id="globalSearchResults" class="search-results-grid" style="display: none;"></div>
        </div>

        <!-- Admin Login Button -->
        <button class="dm-btn admin-toggle" id="adminToggle" title="অ্যাডমিন লগইন">
          <i class="fab fa-google"></i> <span class="dm-btn-text">লগইন</span>
        </button>

        <!-- User Management Button (Super Admin only) -->
        <button id="toolbarUserMgmtBtn" class="dm-btn dm-report"
          style="display: none; background: #6c5ce7; color: white; border: none;">
          <i class="fas fa-users-cog"></i> <span class="dm-btn-text">ব্যবহারকারী</span>
        </button>

      </div>

      <!-- Inline Search Results Panel (hidden by default) -->
      <div id="inlineSearchPanel" class="inline-search-panel" style="display: none;">
        <!-- Candidate Cards (when multiple matches) -->
        <div id="inlineSearchCandidates" class="inline-candidates-grid" style="display: none;"></div>
        <!-- Student History Section (after selection) -->
        <div id="inlineHistorySection" class="inline-history-section" style="display: none;">
          <div id="inlineReportContent" class="inline-report-content">
            <div id="inlineStudentDetails" class="student-details-container"></div>
            <div class="inline-chart-controls">
              <select id="inlineAnalysisType" class="form-select">
                <option value="total">মোট নম্বর</option>
                <option value="written">লিখিত</option>
                <option value="mcq">এমসিকিউ</option>
                <option value="practical">ব্যবহারিক</option>
              </select>
              <select id="inlineAnalysisMaxMarks" class="form-select">
                <option value="100">মার্কস: ১০০</option>
                <option value="75">মার্কস: ৭৫</option>
                <option value="70">মার্কস: ৭০</option>
                <option value="50">মার্কস: ৫০</option>
                <option value="30">মার্কস: ৩০</option>
                <option value="25">মার্কস: ২৫</option>
              </select>
              <button id="inlineDownloadBtn" class="dm-btn dm-report" style="padding: 6px 12px; font-size: 0.8rem;">
                <i class="fas fa-file-image"></i> <span class="dm-btn-text">ডাউনলোড</span>
              </button>
            </div>
            <div class="inline-chart-wrapper">
              <canvas id="inlineHistoryChart"></canvas>
            </div>
          </div>
        </div>
      </div>

      <!-- Saved Exams List (Collapsible) -->
      <div id="savedExamsSection" class="saved-exams-section">
        <div id="savedExamsToggle" class="section-toggle-header">
          <div class="title-with-filters">
            <h3 class="section-title">
              <i class="fas fa-history"></i> সংরক্ষিত ফলাফল (Saved Database)
            </h3>
            <div id="savedExamsFilterBar" class="saved-exams-filter-bar admin-only">
              <span id="savedExamsCount" class="exams-count-badge">মোট: ০টি এক্সাম</span>
              <div id="savedExamsClassFilters" class="class-filter-container">
                <!-- ক্লাস ফিল্টারসমূহ এখানে দেখা যাবে -->
              </div>
            </div>
          </div>
          <i class="fas fa-chevron-up toggle-icon" id="savedExamsIcon"></i>
        </div>
        <div id="savedExamsCollapse" class="collapse-container">
          <div id="savedExamsList" class="saved-exams-list">
            <div style="text-align: center; color: var(--text-color); opacity: 0.6; padding: 10px; width: 100%;">
              লোডিং...
            </div>
          </div>
          <!-- Pagination Controls -->
          <div id="savedExamsPagination" class="pagination-container"></div>
        </div>
      </div>
    </div>

    <!-- Statistics Cards -->
    <div class="stats" id="statsContainer">
      <!-- Statistics will be rendered here -->
    </div>

    <!-- Filters and Controls -->
    <div class="card">
      <div class="controls">
        <!-- Group Filter Buttons -->
        <div class="group-filters">
          <div class="group-btn active" data-group="all">
            <i class="fas fa-users"></i>
            সব গ্রুপ
          </div>
          <div class="group-btn" data-group="বিজ্ঞান গ্রুপ">
            <i class="fas fa-flask"></i>
            বিজ্ঞান
          </div>
          <div class="group-btn" data-group="ব্যবসায় গ্রুপ">
            <i class="fas fa-book"></i>
            ব্যবসায়
          </div>
          <div class="group-btn" data-group="মানবিক গ্রুপ">
            <i class="fas fa-palette"></i>
            মানবিক
          </div>
        </div>

        <!-- Grade Filter Buttons -->
        <div class="grade-filter">
          <div class="grade-btn active" data-grade="all">সব গ্রেড</div>
          <div class="grade-btn grade-A-plus" data-grade="A+">A+</div>
          <div class="grade-btn grade-A" data-grade="A">A</div>
          <div class="grade-btn grade-A-minus" data-grade="A-">A-</div>
          <div class="grade-btn grade-B" data-grade="B">B</div>
          <div class="grade-btn grade-C" data-grade="C">C</div>
          <div class="grade-btn grade-D" data-grade="D">D</div>
          <div class="grade-btn grade-F" data-grade="F">F</div>
          <div class="grade-btn grade-absent" data-grade="absent">অনুপস্থিত</div>
          <div class="grade-btn grade-total-fail" data-grade="total-fail">মোট ফেল</div>
          <div class="grade-btn grade-total-pass" data-grade="total-pass">মোট পাস</div>
        </div>

        <!-- Chart Type Selector -->
        <select id="chartType">
          <option value="total">মোট স্কোর অনুসারে</option>
          <option value="written">লিখিত পরীক্ষার স্কোর</option>
          <option value="mcq">এমসিকিউ স্কোর</option>
          <option value="practical">প্র্যাকটিক্যাল স্কোর</option>
        </select>

        <!-- Sort Order Selector -->
        <select id="sortOrder">
          <option value="desc">সর্বোচ্চ থেকে সর্বনিম্ন</option>
          <option value="asc">সর্বনিম্ন থেকে সর্বোচ্চ</option>
          <option value="roll-asc">রোল: ছোট → বড়</option>
          <option value="roll-desc">রোল: বড় → ছোট</option>
        </select>

        <button id="resetFiltersBtn" class="reset-filters-btn" title="সকল ফিল্টার রিসেট">
          <i class="fas fa-undo-alt"></i> রিসেট
        </button>
      </div>
    </div>

    <!-- Main Chart Section -->
    <div class="card">
      <div class="section-toggle-header" id="chartSectionToggle">
        <h2 class="card-title" id="chartTitle">মোট স্কোর র‌্যাঙ্কিং</h2>
        <i class="fas fa-chevron-up toggle-icon" id="chartSectionIcon"></i>
      </div>
      <div id="chartSectionCollapse" class="collapse-container">
        <div class="view-toggle">
          <button class="view-btn" id="downloadBtn"
            style="background: var(--success); color: white; border: none; margin-right: 10px;">
            <i class="fas fa-download"></i> ডাউনলোড
          </button>
          <button class="view-btn" id="printBtn"
            style="background: #7b8285; color: white; border: none; margin-right: 10px;">
            <i class="fas fa-print"></i> প্রিন্ট
          </button>
          <div class="view-btn active" data-view="chart">
            <i class="fas fa-chart-bar"></i>
            চার্ট
          </div>
          <div class="view-btn" data-view="table">
            <i class="fas fa-table"></i>
            টেবিল
          </div>
          <div class="view-btn" data-view="analysis">
            <i class="fas fa-chart-line"></i>
            এনালাইসিস
          </div>
        </div>
        <div class="chart-container horizontal-chart" id="chartView">
          <canvas id="performanceChart"></canvas>
        </div>
        <div class="table-container" id="tableView" style="display: none">
          <table class="data-table" id="performanceTable">
            <thead>
              <tr>
                <th>রোল</th>
                <th>নাম</th>
                <th>গ্রুপ</th>
                <th>শ্রেণি</th>
                <th>সেশন</th>
                <th>লিখিত</th>
                <th>এমসিকিউ</th>
                <th>প্র্যাকটিক্যাল</th>
                <th>মোট</th>
                <th>গ্রেড</th>
                <th>স্ট্যাটাস</th>
              </tr>
            </thead>
            <tbody id="tableBody">
              <!-- Table data will be rendered here -->
            </tbody>
          </table>
        </div>


        <!-- Student Analysis View -->
        <div class="analysis-container" id="analysisView" style="display: none;">
          <div class="analysis-controls">
            <div class="analysis-search-wrapper">
              <input type="text" id="analysisStudentId" placeholder="নাম বা রোল নম্বর দিয়ে খুঁজুন..."
                class="form-control">
              <div id="analysisSearchResults" class="search-results-grid" style="display: none;"></div>
            </div>

            <select id="analysisType" class="form-select analysis-type-select">
              <option value="total">মোট নম্বর (Total)</option>
              <option value="written">লিখিত (Written)</option>
              <option value="mcq">এমসিকিউ (MCQ)</option>
              <option value="practical">ব্যবহারিক (Practical)</option>
            </select>

            <select id="analysisMaxMarks" class="form-select analysis-marks-select">
              <option value="100">মার্কস: ১০০</option>
              <option value="75">মার্কস: ৭৫</option>
              <option value="70">মার্কস: ৭০</option>
              <option value="50">মার্কস: ৫০</option>
              <option value="30">মার্কস: ৩০</option>
              <option value="25">মার্কস: ২৫</option>
            </select>
            <button class="settings-btn" title="সেটিংস"><i class="fas fa-cog"></i></button>
          </div>

          <!-- Report Container -->
          <div id="analysisReportContent" class="analysis-report-wrapper" style="display: none;">
            <!-- Top Section: Header with info and controls -->
            <div class="report-header-container">
              <div id="studentDetails" class="student-details-section"></div>

              <div class="report-toolbar">
                <select id="analysisSessionSelect" class="form-select sm" style="max-width: 140px;">
                  <option value="all">সকল সেশন</option>
                </select>

                <select id="analysisSubjectSelect" class="form-select sm" style="max-width: 180px;">
                  <option value="all">সকল বিষয়</option>
                </select>

                <button id="downloadAnalysisImage" class="btn btn-primary btn-sm" title="ছবি হিসেবে ডাউনলোড করুন"
                  style="white-space: nowrap; flex-shrink: 0;">
                  <i class="fas fa-image"></i> ডাউনলোড
                </button>

                <div class="analysis-nav-controls">
                  <button id="prevRollBtn" class="nav-btn sm" title="পূর্ববর্তী রোল">
                    <i class="fas fa-chevron-left"></i> <span id="prevRollNum"></span>
                  </button>
                  <div class="current-roll-display">
                    <span id="currentRollNum"></span>
                  </div>
                  <button id="nextRollBtn" class="nav-btn sm" title="পরবর্তী রোল">
                    <span id="nextRollNum"></span> <i class="fas fa-chevron-right"></i>
                  </button>
                </div>

                <div class="latest-exam-badge">
                  <i class="fas fa-history"></i> সর্বশেষ: <span id="latestExamLabel">N/A</span>
                </div>
              </div>
            </div>
            <div class="analysis-chart-container analysis-card" style="margin-top: 20px;">
              <canvas id="historyChart"></canvas>
            </div>
          </div>
        </div>

        <!-- Search Results (for multiple matches) -->
      </div>
    </div>
  </div>

  <!-- Failed Students Section -->
  <div class="card failed-students">
    <div class="card-header">
      <div class="header-main">
        <h2 class="card-title">ফেল করা শিক্ষার্থী (লিখিত &lt; ১৭)</h2>
        <div id="failedHeaderMeta" class="header-meta"></div>
      </div>
      <div class="failed-group-toggles" id="failedGroupToggles">
        <label class="group-toggle-chip science active" data-group="বিজ্ঞান গ্রুপ">
          <input type="checkbox" checked> <span class="chip-dot"></span> বিজ্ঞান
          <span class="chip-count" data-count-group="বিজ্ঞান গ্রুপ">0</span>
        </label>
        <label class="group-toggle-chip business active" data-group="ব্যবসায় গ্রুপ">
          <input type="checkbox" checked> <span class="chip-dot"></span> ব্যবসায়
          <span class="chip-count" data-count-group="ব্যবসায় গ্রুপ">0</span>
        </label>
        <label class="group-toggle-chip arts active" data-group="মানবিক গ্রুপ">
          <input type="checkbox" checked> <span class="chip-dot"></span> মানবিক
          <span class="chip-count" data-count-group="মানবিক গ্রুপ">0</span>
        </label>
      </div>
      <button class="view-btn" id="printFailedBtn"
        style="background: #6366f1; color: white; border: none; font-size: 0.8rem; padding: 4px 10px; margin-right: 6px;">
        <i class="fas fa-print"></i> প্রিন্ট
      </button>
      <button class="view-btn" id="downloadFailedBtn"
        style="background: var(--success); color: white; border: none; font-size: 0.8rem; padding: 4px 10px;">
        <i class="fas fa-download"></i> ডাউনলোড
      </button>
    </div>
    <div class="failed-list" id="failedStudentsContainer">
      <!-- Failed students will be rendered here -->
    </div>
  </div>

  <!-- Group Statistics Section -->
  <div class="card">
    <div class="card-header">
      <div class="header-main">
        <h2 class="card-title">গ্রুপভিত্তিক পাস/ফেল পরিসংখ্যান</h2>
        <div id="groupStatsHeaderMeta" class="header-meta"></div>
      </div>
      <button class="view-btn" id="downloadGroupStatsBtn"
        style="background: var(--success); color: white; border: none; font-size: 0.8rem; padding: 4px 10px;">
        <i class="fas fa-download"></i> ডাউনলোড
      </button>
    </div>
    <div class="group-stats-grid" id="groupStatsContainer">
      <!-- Group statistics will be rendered here -->
    </div>
  </div>
  </div>
  <!-- Save Exam Modal -->
  <div id="saveExamModal" class="modal">
    <div class="modal-content">
      <span class="close" id="closeModalBtn">&times;</span>
      <h2>পরীক্ষার ফলাফল সংরক্ষণ করুন</h2>
      <form id="saveExamForm">
        <div class="form-group">
          <label for="examName">পরীক্ষার নাম (Exam Name):</label>
          <input type="text" id="examName" class="form-control" required
            placeholder="উদাহরণ: প্রাক-নির্বাচনী পরীক্ষা ২০২৫">
        </div>
        <div class="form-row" style="display: flex; gap: 10px;">
          <div class="form-group" style="flex: 1;">
            <label for="examClass">শ্রেণি (Class):</label>
            <select id="examClass" class="form-control">
              <option value="">সিলেক্ট করুন</option>
              <option value="6">৬ষ্ঠ শ্রেণি</option>
              <option value="7">৭ম শ্রেণি</option>
              <option value="8">৮ম শ্রেণি</option>
              <option value="9">৯ম শ্রেণি</option>
              <option value="10">১০ম শ্রেণি</option>
              <option value="SSC">SSC</option>
              <option value="HSC">HSC</option>
            </select>
          </div>
          <div class="form-group" style="flex: 1;">
            <label for="examSession">সেশন (Session):</label>
            <input type="text" id="examSession" class="form-control" placeholder="2025" value="2025">
          </div>
        </div>
        <div class="form-group">
          <label for="examSubject">বিষয় (Subject):</label>
          <select id="examSubject" class="form-control" disabled>
            <option value="">আগে শ্রেণি সিলেক্ট করুন</option>
          </select>
        </div>
        <button type="submit" class="btn-primary" style="width: 100%; margin-top: 10px;">সংরক্ষণ করুন</button>
      </form>
    </div>
  </div>



  <!-- Edit Exam Modal -->
  <div id="editExamModal" class="modal">
    <div class="modal-content">
      <span class="close" id="closeEditModal">&times;</span>
      <h2><i class="fas fa-edit"></i> পরীক্ষার তথ্য সম্পাদনা</h2>
      <form id="editExamForm">
        <input type="hidden" id="editExamDocId">
        <div class="form-group">
          <label for="editExamName">পরীক্ষার নাম:</label>
          <input type="text" id="editExamName" class="form-control" required>
        </div>
        <div class="form-row" style="display: flex; gap: 10px;">
          <div class="form-group" style="flex: 1;">
            <label for="editExamClass">শ্রেণি (Class):</label>
            <select id="editExamClass" class="form-control">
              <option value="">সিলেক্ট করুন</option>
              <option value="6">৬ষ্ঠ শ্রেণি</option>
              <option value="7">৭ম শ্রেণি</option>
              <option value="8">৮ম শ্রেণি</option>
              <option value="9">৯ম শ্রেণি</option>
              <option value="10">১০ম শ্রেণি</option>
              <option value="SSC">SSC</option>
              <option value="HSC">HSC</option>
            </select>
          </div>
          <div class="form-group" style="flex: 1;">
            <label for="editExamSession">সেশন (Session):</label>
            <input type="text" id="editExamSession" class="form-control" placeholder="2025">
          </div>
        </div>
        <div class="form-group">
          <label for="editSubjectName">বিষয়:</label>
          <select id="editSubjectName" class="form-control">
            <option value="">আগে শ্রেণি সিলেক্ট করুন</option>
          </select>
        </div>
        <button type="submit" class="btn-primary" style="width: 100%; margin-top: 10px;">আপডেট করুন</button>
      </form>
    </div>
  </div>

  <!-- Profile Modal -->
  <div id="profileModal" class="modal">
    <div class="modal-content profile-modal-content">
      <span class="close" id="closeProfileIcon">&times;</span>
      <div class="profile-header">
        <div class="profile-pic-container">
          <img id="userPhoto" src="https://ui-avatars.com/api/?name=Admin&background=random" alt="Profile">
        </div>
        <h2 id="userName">অ্যাডমিন ইউজার</h2>
        <p id="userEmail">admin@example.com</p>
      </div>
      <div class="profile-actions">
        <button id="modalLogoutBtn" class="btn-danger">
          <i class="fas fa-sign-out-alt"></i> লগআউট করুন
        </button>
        <button id="closeProfileBtn" class="btn-secondary">বন্ধ করুন</button>
      </div>
    </div>
  </div>

  <!-- User Management Modal -->
  <div id="userManagementModal" class="modal">
    <div class="modal-content" style="max-width: 800px;">
      <span class="close" id="closeUserManagementBtn">&times;</span>
      <div style="display: flex; justify-content: space-between; align-items: center;">
        <h2><i class="fas fa-users-cog"></i> ব্যবহারকারী ব্যবস্থাপনা</h2>
        <button id="subjectSettingsBtn" class="btn-primary" style="font-size: 0.9em;">
          <i class="fas fa-cogs"></i> বিষয় সেটিংস
        </button>
      </div>
      <div class="user-list-container" style="overflow-x: auto;">
        <table class="user-table" style="width: 100%; border-collapse: collapse; margin-top: 15px;">
          <thead>
            <tr style="background: #f1f2f6; text-align: left; color: #2d3436;">
              <th style="padding: 10px;">ব্যবহারকারী</th>
              <th style="padding: 10px;">ইমেইল</th>
              <th style="padding: 10px;">বর্তমান রোল</th>
              <th style="padding: 10px; text-align: right;">পদক্ষেপ</th>
            </tr>
          </thead>
          <tbody id="userListBody">
            <!-- User rows injected here -->
          </tbody>
        </table>
      </div>

      <!-- New Class Subject Mapping Section -->
      <div style="margin-top: 20px; border-top: 1px solid #eee; padding-top: 15px;">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
          <h3><i class="fas fa-list-alt"></i> ক্লাস ও বিষয় ম্যাপিং</h3>
          <button id="openClassMappingBtn" class="btn-secondary" style="font-size: 0.9em;">
            <i class="fas fa-edit"></i> ম্যাপিং এডিট করুন
          </button>
        </div>
        <p style="font-size: 0.9em; color: #666;">এখানে ক্লাস অনুযায়ী বিষয়গুলো সেট করুন। এটি এক্সাম সেভ করার সময়
          ড্রপডাউনে দেখাবে।</p>
      </div>
    </div>
  </div>

  <!-- Class Subject Mapping Modal -->
  <div id="classSubjectMappingModal" class="modal">
    <div class="modal-content" style="max-width: 600px;">
      <span class="close" id="closeClassMappingBtn">&times;</span>
      <h2><i class="fas fa-project-diagram"></i> ক্লাস ও বিষয় ম্যাপিং</h2>

      <div class="form-group">
        <label for="mappingClassSelect">ক্লাস সিলেক্ট করুন:</label>
        <select id="mappingClassSelect" class="form-control">
          <option value="6">৬ষ্ঠ শ্রেণি</option>
          <option value="7">৭ম শ্রেণি</option>
          <option value="8">৮ম শ্রেণি</option>
          <option value="9">৯ম শ্রেণি</option>
          <option value="10">১০ম শ্রেণি</option>
          <option value="SSC">SSC</option>
          <option value="HSC">HSC</option>
        </select>
      </div>

      <div class="form-group">
        <label>বিষয়সমূহ (Subjects):</label>
        <div style="display: flex; gap: 10px; margin-bottom: 10px;">
          <input type="text" id="mappingSubjectInput" class="form-control" placeholder="বিষয় লিখুন (যেমন: Bangla)"
            style="flex: 1;">
          <button id="addMappingSubjectBtn" class="btn-primary">
            <i class="fas fa-plus"></i>
          </button>
        </div>
        <div id="mappingSubjectsContainer"
          style="display: flex; flex-wrap: wrap; gap: 8px; min-height: 50px; padding: 10px; background: var(--bg-color); border-radius: 4px;">
          <!-- Subject Tags will appear here -->
        </div>
      </div>

      <button id="saveMappingBtn" class="btn-primary" style="width: 100%; margin-top: 15px;">
        <i class="fas fa-save"></i> সংরক্ষণ করুন
      </button>
    </div>
  </div>


  <!-- Subject Settings Modal (Modern Landscape Design) -->
  <div id="subjectSettingsModal" class="modal">
    <div class="modal-content landscape-modal">
      <div class="modal-header" style="flex-direction: column; align-items: flex-start; gap: 8px;">
        <div style="display: flex; justify-content: space-between; width: 100%; align-items: center;">
          <h2><i class="fas fa-sliders-h"></i> বিষয় কনফিগারেশন</h2>
          <span class="close" id="closeSubjectSettingsBtn">&times;</span>
        </div>
        <div
          style="font-size: 0.85rem; color: var(--text-color); background: rgba(245, 158, 11, 0.15); border-left: 3px solid var(--warning); padding: 8px; border-radius: 4px; width: 100%;">
          <i class="fas fa-exclamation-triangle" style="color: var(--warning); margin-right: 5px;"></i>
          এক্সেল ইমপোর্টের সময় <strong>ক্লাস ও বিষয়ের নাম</strong> প্রদত্ত বিষয়ের নামের সাথে ম্যাচ করতে হবে কাস্টম
          কনফিগারেশনে
        </div>
      </div>

      <div class="landscape-body">
        <!-- Left Side: List of Subjects -->
        <div class="config-sidebar">
          <div class="sidebar-header">
            <h4>সংরক্ষিত বিষয়সমূহ</h4>
            <span class="badge-count" id="subjectCount">0</span>
          </div>
          <div class="search-wrapper">
            <i class="fas fa-search"></i>
            <input type="text" id="subjectSearch" placeholder="বিষয় খুঁজুন..." />
          </div>
          <div id="savedConfigsList" class="config-list-container">
            <!-- List Items Injected Here -->
          </div>
          <div class="sidebar-footer">
            <button id="addNewSubjectBtn" class="btn-secondary btn-sm btn-block">
              <i class="fas fa-plus"></i> নতুন বিষয় যোগ করুন
            </button>
          </div>
        </div>

        <!-- Right Side: Configuration Form -->
        <div class="config-main">
          <div class="form-header">
            <h3 id="formTitle">নতুন কনফিগারেশন</h3>
            <p>পাস মার্ক এবং মোট নম্বর সেট করুন</p>
          </div>

          <div class="form-grid">
            <div class="form-group full-width">
              <label>বিষয়ের নাম <span class="required">*</span></label>
              <input type="text" id="configSubjectName" class="form-control" placeholder="যেমন: ICT, Bangla">
            </div>

            <!-- Written -->
            <div class="mark-group">
              <label><i class="fas fa-pen"></i> লিখিত (Written)</label>
              <div class="input-row">
                <div class="input-col">
                  <small>মোট</small>
                  <input type="number" id="configWrittenMax" class="form-control" placeholder="0">
                </div>
                <div class="input-col">
                  <small>পাস মার্ক</small>
                  <input type="number" id="configWrittenPass" class="form-control" placeholder="0">
                </div>
              </div>
            </div>

            <!-- MCQ -->
            <div class="mark-group">
              <label><i class="fas fa-check-square"></i> এমসিকিউ (MCQ)</label>
              <div class="input-row">
                <div class="input-col">
                  <small>মোট</small>
                  <input type="number" id="configMcqMax" class="form-control" placeholder="0">
                </div>
                <div class="input-col">
                  <small>পাস মার্ক</small>
                  <input type="number" id="configMcqPass" class="form-control" placeholder="0">
                </div>
              </div>
            </div>

            <!-- Practical -->
            <div class="mark-group">
              <label><i class="fas fa-flask"></i> ব্যবহারিক (Practical)</label>
              <div class="input-row">
                <div class="input-col">
                  <small>মোট</small>
                  <input type="number" id="configPracticalMax" class="form-control" placeholder="0">
                </div>
                <div class="input-col">
                  <small>পাস মার্ক</small>
                  <input type="number" id="configPracticalPass" class="form-control" placeholder="0">
                </div>
              </div>
              <div class="checkbox-wrapper">
                <input type="checkbox" id="configPracticalOptional" class="form-check-input">
                <label for="configPracticalOptional">ঐচ্ছিক?</label>
              </div>
            </div>

            <!-- Total -->
            <div class="mark-group total-group">
              <label><i class="fas fa-calculator"></i> সর্বমোট (Total)</label>
              <input type="number" id="configTotalMax" class="form-control" placeholder="100">
              <span id="calcTotalPreview" class="calc-preview">গণনা: 0</span>
            </div>
          </div>

          <div class="form-actions">
            <button id="deleteSubjectBtn" class="btn-danger-outline" style="display: none;">
              <i class="fas fa-trash"></i> ডিলিট
            </button>
            <button id="saveSubjectConfigBtn" class="btn-primary">
              <i class="fas fa-save"></i> সংরক্ষণ করুন
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Confirm Modal (Delete Confirmation) -->
  <div id="confirmModal" class="modal">
    <div class="modal-content confirm-modal-content">
      <div class="confirm-modal-icon">
        <i class="fas fa-exclamation-triangle"></i>
      </div>
      <h2 id="confirmTitle">নিশ্চিত করুন</h2>
      <p id="confirmMessage">আপনি কি নিশ্চিত যে আপনি এটি মুছে ফেলতে চান?</p>
      <div class="confirm-modal-actions">
        <button id="confirmCancelBtn" class="btn-secondary">না, থাক</button>
        <button id="confirmDeleteBtn" class="btn-danger">হ্যাঁ, মুছে ফেলুন</button>
      </div>
    </div>
  </div>


</body>

</html>